<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>PranayAI</title>

  <link rel="stylesheet" href="/static/style.css" />
  <link rel="icon" type="image/png" href="/static/logo.png" />
</head>
<body>

  <div id="app-root">

    <!-- ========== SIDEBAR ========== -->
    <aside id="sidebar">
      <div id="sidebar-header">
        <div id="brand-block">
          <img id="brand-logo" src="/static/logo.png" alt="PranayAI logo" />
          <div class="brand-text">
            <div class="brand-name-row">
              <span class="brand-name">PranayAI</span>
              <span class="status-dot"></span>
              <span class="status-text" id="online-status">Online</span>
            </div>
            <div class="signed-in-row hidden" id="signed-in-row">
              <span class="signed-in-email" id="signed-in-email"></span>
            </div>
          </div>
        </div>

        <button id="new-chat-btn" class="pill-btn">
          <span class="pill-icon">✚</span>
          <span class="pill-text">New chat</span>
        </button>
      </div>

      <div id="sidebar-section-label">Chats</div>

      <div id="chat-list">
        <div class="chat-list-item active-chat">
          <span class="chat-list-title">New chat</span>
        </div>
      </div>

      <div id="sidebar-footer">
        <button id="signin-btn" class="signin-btn">
          <img class="google-icon" src="/static/google-icon.png" alt="G" />
          <span id="signin-btn-text">Sign in with Google</span>
        </button>
      </div>
    </aside>

    <!-- ========== MAIN AREA ========== -->
    <main id="main">

      <!-- ⋯ menu button -->
      <button id="menu-button" class="icon-btn" title="Menu">⋯</button>

      <!-- ⋯ popover -->
      <div id="settings-modal" class="popover hidden">
        <div class="popover-item" data-action="open-settings">Settings</div>
        <div class="popover-item" data-action="open-background">Background</div>
        <div class="popover-item" data-action="open-help">Help</div>
        <div class="popover-divider"></div>
        <div class="popover-item danger" data-action="sign-out">Sign out</div>
      </div>

      <!-- chat scroll -->
      <section id="chat-scroll">
        <div id="chat-box"></div>

        <!-- typing dots -->
        <div id="loading-dots" class="hidden">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </section>

      <!-- bottom input bar -->
      <footer id="input-bar">
        <!-- + button -->
        <button id="plus-button" class="icon-btn" title="More">+</button>

        <!-- plus popover -->
        <div id="upload-menu" class="popover hidden">
          <div class="popover-item" id="upload-image-trigger">Upload image</div>
          <div class="popover-divider"></div>
          <div class="popover-item" id="custom-bg-trigger">Custom background</div>
        </div>

        <!-- hidden file inputs -->
        <input id="image-file-input" type="file" accept="image/*" class="hidden" />
        <input id="bg-file-input" type="file" accept="image/*" class="hidden" />

        <!-- text field -->
        <input
          id="user-input"
          type="text"
          placeholder="Message PranayAI..."
          autocomplete="off"
        />

        <!-- send -->
        <button id="send-button" class="send-btn" title="Send">➤</button>
      </footer>
    </main>
  </div>

  <!-- ========= SIGN-IN MODAL ========= -->
  <div id="signin-modal" class="overlay hidden">
    <div class="overlay-card">
      <div class="overlay-card-header">
        <div class="overlay-title">Sign in</div>
        <button class="overlay-close" id="signin-close">✕</button>
      </div>

      <div class="overlay-body">
        <p class="overlay-body-main">
          Sign in with Google to save chats to your account and access them from any device.
        </p>

        <button class="google-big-btn" id="google-login-real">
          <img class="google-icon" src="/static/google-icon.png" alt="Google"/>
          <span>Continue with Google</span>
        </button>

        <p class="overlay-body-foot">
          By continuing, you agree to the responsible use policy.
          Do not use responses as graded work without teacher permission.
        </p>
      </div>
    </div>
  </div>

  <!-- ========= BACKGROUND PICKER MODAL ========= -->
  <div id="background-modal" class="overlay hidden">
    <div class="overlay-card wide-card">
      <div class="overlay-card-header">
        <div class="overlay-title">Choose background</div>
        <button class="overlay-close" id="background-close">✕</button>
      </div>

      <div class="overlay-body">
        <div class="bg-grid">
          <!-- preset 1 -->
          <div class="bg-choice" data-bg="/static/bg1.jpg" style="background-image:url('/static/bg1.jpg')">
            <div class="bg-choice-label">Purple glow</div>
          </div>
          <!-- preset 2 -->
          <div class="bg-choice" data-bg="/static/bg2.jpg" style="background-image:url('/static/bg2.jpg')">
            <div class="bg-choice-label">Blue tech</div>
          </div>
          <!-- preset 3 -->
          <div class="bg-choice" data-bg="/static/bg3.jpg" style="background-image:url('/static/bg3.jpg')">
            <div class="bg-choice-label">Abstract shapes</div>
          </div>
        </div>

        <div class="bg-upload-row">
          <button class="neutral-btn" id="bg-upload-btn">Upload your own…</button>
        </div>

        <p class="overlay-body-foot smaller-foot">
          Backgrounds are just visual. Keep work school-appropriate.
        </p>
      </div>
    </div>
  </div>

  <!-- ========= SETTINGS MODAL (REAL CONTENT) ========= -->
  <div id="prefs-modal" class="overlay hidden">
    <div class="overlay-card">
      <div class="overlay-card-header">
        <div class="overlay-title">Settings</div>
        <button class="overlay-close" id="prefs-close">✕</button>
      </div>

      <div class="overlay-body">
        <p class="overlay-body-main">
          Coming soon: model choice, data retention toggle, etc.
        </p>
        <p class="overlay-body-foot">
          Right now: PranayAI may make mistakes. Double-check important answers.
        </p>
      </div>
    </div>
  </div>

  <!-- ========= HELP / POLICY MODAL ========= -->
  <div id="help-modal" class="overlay hidden">
    <div class="overlay-card">
      <div class="overlay-card-header">
        <div class="overlay-title">Responsible Use</div>
        <button class="overlay-close" id="help-close">✕</button>
      </div>

      <div class="overlay-body">
        <p class="overlay-body-main">
          PranayAI is here to help you understand, study, and learn.  
          You are responsible for how you use answers.  
          Do not turn in AI responses as graded work without teacher approval.  
          Do not use this to cheat on tests, quizzes, or assignments at Poway Unified.  
          Use it like a tutor, not a replacement for your own work.
        </p>
        <p class="overlay-body-foot smaller-foot">
          If you see something unsafe or you feel pressured to break rules, stop using
          the tool and talk to a teacher or staff member.
        </p>
      </div>
    </div>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>
